var ContextModal=function(){'use strict';function d(yb){return yb&&yb.__esModule?yb['default']:yb}function g(yb,zb){return zb={exports:{}},yb(zb,zb.exports),zb.exports}var l='undefined'==typeof window?'undefined'==typeof global?'undefined'==typeof self?{}:self:global:window,m=g(function(yb){var zb=yb.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=zb)}),n=g(function(yb){var zb=yb.exports={version:'2.4.0'};'number'==typeof __e&&(__e=zb)}),q=function(yb){if('function'!=typeof yb)throw TypeError(yb+' is not a function!');return yb},s=function(yb){return'object'==typeof yb?null!==yb:'function'==typeof yb},v=function(yb){try{return!!yb()}catch(zb){return!0}},w=!v(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a}),y=s,z=m.document,D=y(z)&&y(z.createElement),E=function(yb){return D?z.createElement(yb):{}},G=!w&&!v(function(){return 7!=Object.defineProperty(E('div'),'a',{get:function(){return 7}}).a}),H=s,J=function(yb){if(!s(yb))throw TypeError(yb+' is not an object!');return yb},M=function(yb,zb){if(!H(yb))return yb;var Ab,Bb;if(zb&&'function'==typeof(Ab=yb.toString)&&!H(Bb=Ab.call(yb)))return Bb;if('function'==typeof(Ab=yb.valueOf)&&!H(Bb=Ab.call(yb)))return Bb;if(!zb&&'function'==typeof(Ab=yb.toString)&&!H(Bb=Ab.call(yb)))return Bb;throw TypeError('Can\'t convert object to primitive value')},N=Object.defineProperty,Q=w?Object.defineProperty:function(zb,Ab,Bb){if(J(zb),Ab=M(Ab,!0),J(Bb),G)try{return N(zb,Ab,Bb)}catch(Cb){}if('get'in Bb||'set'in Bb)throw TypeError('Accessors not supported!');return'value'in Bb&&(zb[Ab]=Bb.value),zb},R={f:Q},W=function(yb,zb){return{enumerable:!(1&yb),configurable:!(2&yb),writable:!(4&yb),value:zb}},X=w?function(yb,zb,Ab){return R.f(yb,zb,W(1,Ab))}:function(yb,zb,Ab){return yb[zb]=Ab,yb},Y=m,Z=n,$=function(yb,zb,Ab){return(q(yb),void 0===zb)?yb:1===Ab?function(Bb){return yb.call(zb,Bb)}:2===Ab?function(Bb,Cb){return yb.call(zb,Bb,Cb)}:3===Ab?function(Bb,Cb,Db){return yb.call(zb,Bb,Cb,Db)}:function(){return yb.apply(zb,arguments)}},aa='prototype',ba=function(yb,zb,Ab){var Kb,Lb,Mb,Bb=yb&ba.F,Cb=yb&ba.G,Db=yb&ba.S,Eb=yb&ba.P,Fb=yb&ba.B,Gb=yb&ba.W,Hb=Cb?Z:Z[zb]||(Z[zb]={}),Ib=Hb[aa],Jb=Cb?Y:Db?Y[zb]:(Y[zb]||{})[aa];for(Kb in Cb&&(Ab=zb),Ab)Lb=!Bb&&Jb&&void 0!==Jb[Kb],Lb&&Kb in Hb||(Mb=Lb?Jb[Kb]:Ab[Kb],Hb[Kb]=Cb&&'function'!=typeof Jb[Kb]?Ab[Kb]:Fb&&Lb?$(Mb,Y):Gb&&Jb[Kb]==Mb?function(Sb){var Tb=function(Ub,Vb,Wb){if(this instanceof Sb){switch(arguments.length){case 0:return new Sb;case 1:return new Sb(Ub);case 2:return new Sb(Ub,Vb);}return new Sb(Ub,Vb,Wb)}return Sb.apply(this,arguments)};return Tb[aa]=Sb[aa],Tb}(Mb):Eb&&'function'==typeof Mb?$(Function.call,Mb):Mb,Eb&&((Hb.virtual||(Hb.virtual={}))[Kb]=Mb,yb&ba.R&&Ib&&!Ib[Kb]&&X(Ib,Kb,Mb)))};ba.F=1,ba.G=2,ba.S=4,ba.P=8,ba.B=16,ba.W=32,ba.U=64,ba.R=128;var ca=ba,da={}.hasOwnProperty,fa={}.toString,ha=function(yb){return fa.call(yb).slice(8,-1)},ia=Object('z').propertyIsEnumerable(0)?Object:function(yb){return'String'==ha(yb)?yb.split(''):Object(yb)},ja=function(yb){if(yb==void 0)throw TypeError('Can\'t call method on  '+yb);return yb},ma=function(yb){return ia(ja(yb))},na=Math.ceil,oa=Math.floor,pa=function(yb){return isNaN(yb=+yb)?0:(0<yb?oa:na)(yb)},ra=Math.min,ua=Math.max,va=Math.min,ya=function(yb){return 0<yb?ra(pa(yb),9007199254740991):0},za=function(yb,zb){return yb=pa(yb),0>yb?ua(yb+zb,0):va(yb,zb)},Ba=m,Ca='__core-js_shared__',Da=Ba[Ca]||(Ba[Ca]={}),Fa=0,Ga=Math.random(),Ia=function(yb){return Da[yb]||(Da[yb]={})}('keys'),Ja=function(yb){return'Symbol('.concat(yb===void 0?'':yb,')_',(++Fa+Ga).toString(36))},La=function(yb,zb){return da.call(yb,zb)},Na=function(yb){return function(zb,Ab,Bb){var Fb,Cb=ma(zb),Db=ya(Cb.length),Eb=za(Bb,Db);if(yb&&Ab!=Ab){for(;Db>Eb;)if(Fb=Cb[Eb++],Fb!=Fb)return!0;}else for(;Db>Eb;Eb++)if((yb||Eb in Cb)&&Cb[Eb]===Ab)return yb||Eb||0;return!yb&&-1}}(!1),Oa=function(yb){return Ia[yb]||(Ia[yb]=Ja(yb))}('IE_PROTO'),Qa='constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(','),Ra=function(yb,zb){var Db,Ab=ma(yb),Bb=0,Cb=[];for(Db in Ab)Db!=Oa&&La(Ab,Db)&&Cb.push(Db);for(;zb.length>Bb;)La(Ab,Db=zb[Bb++])&&(~Na(Cb,Db)||Cb.push(Db));return Cb},Ta=Object.keys||function(zb){return Ra(zb,Qa)},Ua=Object.getOwnPropertySymbols,Wa={}.propertyIsEnumerable,$a=Ta,_a={f:Ua},ab={f:Wa},bb=function(yb){return Object(ja(yb))},db=Object.assign,eb=!db||v(function(){var yb={},zb={},Ab=Symbol(),Bb='abcdefghijklmnopqrst';return yb[Ab]=7,Bb.split('').forEach(function(Cb){zb[Cb]=Cb}),7!=db({},yb)[Ab]||Object.keys(db({},zb)).join('')!=Bb})?function(zb){for(var Bb=bb(zb),Cb=arguments.length,Db=1,Eb=_a.f,Fb=ab.f;Cb>Db;)for(var Kb,Gb=ia(arguments[Db++]),Hb=Eb?$a(Gb).concat(Eb(Gb)):$a(Gb),Ib=Hb.length,Jb=0;Ib>Jb;)Fb.call(Gb,Kb=Hb[Jb++])&&(Bb[Kb]=Gb[Kb]);return Bb}:db,fb=ca;fb(fb.S+fb.F,'Object',{assign:eb});var gb=n.Object.assign,hb=g(function(yb){yb.exports={'default':gb,__esModule:!0}}),ib=d(hb),jb=g(function(yb,zb){'use strict';zb.__esModule=!0;var Cb=function(Db){return Db&&Db.__esModule?Db:{default:Db}}(hb);zb.default=Cb.default||function(Db){for(var Fb,Eb=1;Eb<arguments.length;Eb++)for(var Gb in Fb=arguments[Eb],Fb)Object.prototype.hasOwnProperty.call(Fb,Gb)&&(Db[Gb]=Fb[Gb]);return Db}}),kb=d(jb),lb=g(function(yb,zb){'use strict';zb.__esModule=!0,zb.default=function(Ab,Bb){if(!(Ab instanceof Bb))throw new TypeError('Cannot call a class as a function')}}),mb=d(lb),nb=ca;nb(nb.S+nb.F*!w,'Object',{defineProperty:R.f});var ob=n.Object,pb=function(zb,Ab,Bb){return ob.defineProperty(zb,Ab,Bb)},qb=g(function(yb){yb.exports={'default':pb,__esModule:!0}}),rb=g(function(yb,zb){'use strict';zb.__esModule=!0;var Cb=function(Db){return Db&&Db.__esModule?Db:{default:Db}}(qb);zb.default=function(){function Db(Eb,Fb){for(var Hb,Gb=0;Gb<Fb.length;Gb++)Hb=Fb[Gb],Hb.enumerable=Hb.enumerable||!1,Hb.configurable=!0,'value'in Hb&&(Hb.writable=!0),(0,Cb.default)(Eb,Hb.key,Hb)}return function(Eb,Fb,Gb){return Fb&&Db(Eb.prototype,Fb),Gb&&Db(Eb,Gb),Eb}}()}),sb=d(rb),tb=l.CustomEvent,ub=function(){try{var yb=new tb('cat',{detail:{foo:'bar'}});return'cat'===yb.type&&'bar'===yb.detail.foo}catch(zb){}return!1}()?tb:'undefined'!=typeof document&&'function'==typeof document.createEvent?function(zb,Ab){var Bb=document.createEvent('CustomEvent');return Ab?Bb.initCustomEvent(zb,Ab.bubbles,Ab.cancelable,Ab.detail):Bb.initCustomEvent(zb,!1,!1,void 0),Bb}:function(zb,Ab){var Bb=document.createEventObject();return Bb.type=zb,Ab?(Bb.bubbles=!!Ab.bubbles,Bb.cancelable=!!Ab.cancelable,Bb.detail=Ab.detail):(Bb.bubbles=!1,Bb.cancelable=!1,Bb.detail=void 0),Bb},vb={scrollable:document.body,transition:['opacity .2s linear','none']},wb=function(){function yb(zb,Ab,Bb){mb(this,yb),this.trigger=zb,this.eventType=this.trigger.getAttribute('data-context-modal-event-type')||'click',this.ctx=Ab,this.ctxModal=Bb,this.showCtx=this._createShowCtx.bind(this),this.hideCtx=this._createHideCtx.bind(this),this.handleTransitionend=this._createTransitionendHandler.bind(this),this.ctx.addEventListener('transitionend',this.handleTransitionend);var Cb={collection:this};this.events={contextmodalwillshow:new ub('contextmodalwillshow',{detail:Cb}),contextmodalwillhide:new ub('contextmodalwillhide',{detail:Cb}),contextmodaldidshow:new ub('contextmodaldidshow',{detail:Cb}),contextmodaldidhide:new ub('contextmodaldidhide',{detail:Cb})}}return sb(yb,[{key:'getPosition',value:function(Ab){var Bb=this,Cb=this.trigger.getBoundingClientRect(),Db=this.trigger.getAttribute('data-context-modal-offset');return Ab=function(){return'left-top'===Db?(Ab.offsetX=0,Ab.offsetY=0,Ab):'right-top'===Db?(Ab.offsetX=Bb.trigger.clientWidth,Ab.offsetY=0,Ab):'left-bottom'===Db?(Ab.offsetX=0,Ab.offsetY=Bb.trigger.clientHeight,Ab):'right-bottom'===Db?(Ab.offsetX=Bb.trigger.clientWidth,Ab.offsetY=Bb.trigger.clientHeight,Ab):Ab}(),{left:function(){var Eb=Cb.left+Ab.offsetX,Fb=Eb+Bb.ctx.clientWidth-innerWidth;return 0<Fb&&(Eb-=Fb),Eb+'px'}(),top:function(){var Eb=Cb.top+Ab.offsetY,Fb=Eb+Bb.ctx.clientHeight-innerHeight;return 0<Fb&&(Eb-=Fb),Eb+'px'}()}}},{key:'addEventListener',value:function(){this.trigger.addEventListener(this.eventType,this.showCtx)}},{key:'teardown',value:function(){this.trigger.removeEventListener(this.eventType,this.showCtx),this.ctx.removeEventListener('transitionend',this.handleTransitionend)}},{key:'isVisible',value:function(){return this.ctxModal.active===this}},{key:'hasTransition',value:function(){return'0s'!==getComputedStyle(this.ctx).transitionDuration}},{key:'_createTransitionendHandler',value:function(){this.isVisible()?this.postShowCtx():this.postHideCtx()}},{key:'getScrollable',value:function(){var Ab=this.trigger.getAttribute('data-context-modal-scrollable');return Ab&&document.querySelector(Ab)||this.ctxModal.opts.scrollable||vb.scrollable}},{key:'getTransition',value:function(Ab){if('show'===Ab){var Bb=this.trigger.getAttribute('data-context-modal-transition-for-onshow');return Bb||this.ctxModal.opts.transition[0]||vb.transition[0]}var Cb=this.trigger.getAttribute('data-context-modal-transition-for-onhide');return Cb||this.ctxModal.opts.transition[1]||vb.transition[1]}},{key:'_createShowCtx',value:function(Ab){var Bb=this,Cb=Ab.offsetX,Db=Ab.offsetY;this.ctx.dispatchEvent(this.events.contextmodalwillshow),this.ctxModal.showWall(),this.ctxModal.active=this,ib(this.ctx.style,{display:'',opacity:0}),setTimeout(function(){ib(Bb.ctx.style,kb({webkitTransition:Bb.getTransition('show'),transition:Bb.getTransition('show'),position:'fixed'},Bb.getPosition({offsetX:Cb,offsetY:Db}))),setTimeout(function(){Bb.activeScrollable=Bb.getScrollable(),Bb.activeScrollable.style.overflow='hidden',ib(Bb.ctx.style,{opacity:1,zIndex:99999}),Bb.hasTransition()||Bb.postShowCtx()},0)},0)}},{key:'postShowCtx',value:function(){this.ctx.dispatchEvent(this.events.contextmodaldidshow)}},{key:'_createHideCtx',value:function(){var Ab=this;this.ctx.dispatchEvent(this.events.contextmodalwillhide),ib(this.ctx.style,{webkitTransition:this.getTransition('hide'),transition:this.getTransition('hide')}),setTimeout(function(){ib(Ab.ctx.style,{opacity:0,zIndex:''}),setTimeout(function(){Ab.ctxModal.active=null,Ab.hasTransition()||Ab.postHideCtx()},0)},0)}},{key:'postHideCtx',value:function(){ib(this.ctx.style,{display:'none'}),this.ctxModal.hideWall(),this.activeScrollable&&(this.activeScrollable.style.overflow='',delete this.activeScrollable),this.ctx.dispatchEvent(this.events.contextmodaldidhide)}}]),yb}(),xb=function(){function yb(){var zb=this,Ab=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,Bb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:vb;if(mb(this,yb),null===Ab)throw new Error('Required `elements` with first argument');(Ab instanceof HTMLCollection||Ab instanceof NodeList)&&(Ab=Array.prototype.slice.call(Ab)),this.opts=ib({},vb,Bb),this.collections=Ab.map(function(Cb){var Db=Cb.getAttribute('data-context-modal-for'),Eb=document.querySelector('[data-context-modal-id='+Db+']');return Db&&Eb?new wb(Cb,Eb,zb):null}).filter(function(Cb){return null!==Cb}),this.wall=null,this.active=null,this.handleClickOnWall=this._createClickOnWallHandler.bind(this)}return sb(yb,[{key:'init',value:function(){this.collections.forEach(function(Ab){Ab.addEventListener()}),this._createWall()}},{key:'teardown',value:function(){if(null!==this.active)throw new Error('Can not be teardown while a modal is visible');this.collections.forEach(function(Ab){Ab.teardown()}),this.wall.removeEventListener('click',this.handleClickOnWall)}},{key:'_createClickOnWallHandler',value:function(){this.hideWall(),null!==this.active&&this.active.hideCtx()}},{key:'_createWall',value:function(){this.wall=document.createElement('wall'),ib(this.wall.style,{position:'fixed',left:0,top:0,width:'100%',height:'100%',display:'none'}),document.body.appendChild(this.wall),this.wall.addEventListener('click',this.handleClickOnWall)}},{key:'showWall',value:function(){this.wall.style.display='block'}},{key:'hideWall',value:function(){this.wall.style.display='none'}}]),yb}();return xb}();
